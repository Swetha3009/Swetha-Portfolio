html.intro-active { overflow: hidden; }

/* overlay container */
.intro{
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: grid;
  place-items: center;
  background: #0f0f0f;              /* matches site bg */
  pointer-events: auto;
  opacity: 1;
}

/* ambient layer (grain + vignette) */
.intro__ambient{ position:absolute; inset:0; overflow:hidden; }
.intro__grain{
  position:absolute; inset:-20%;
  opacity:.06; mix-blend-mode: soft-light;
  background-image:url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)'/></svg>");
  animation: grain 1.8s steps(2,end) infinite;
}
.intro__vignette{
  position:absolute; inset:-20%;
  background:
    radial-gradient(60% 45% at 50% 40%, rgba(138,180,248,.10), transparent 60%),
    radial-gradient(140% 100% at 50% 120%, #0f0f0f 40%, transparent 60%);
  pointer-events:none;
}

/* terminal line */
.intro__term{
  position: relative;
  z-index: 2;
  font: 600 16px/1.2 ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  color: #dfe7ff;
  text-shadow: 0 0 14px rgba(138,180,248,.25);
  transform: translateY(8px);
  user-select: none;
}
.intro__line{ display:flex; align-items:center; gap:.5rem; }
.intro__prompt{ color:#8ab4f8; font-weight:800; }
.intro__type{
  /* JS sets --chars and --typeMs inline */
  width: 0ch;                       /* grows via steps() */
  overflow: hidden;
  white-space: nowrap;
}
.intro__type::after{
  /* prevents reflow jank in some browsers while typing */
  content: attr(data-text);
  position:absolute; left:-9999px;
}
.intro__caret{
  width:.6ch; height:1.1em; background:#8ab4f8; margin-left:.2ch;
  border-radius:2px; box-shadow:0 0 14px rgba(138,180,248,.6);
}
.intro__sub{
  margin-top:.6rem; color:#97a9d8; opacity:.85; font-weight:500;
}

/* play states */
.intro.is-typing .intro__type{
  animation: intro-type var(--typeMs, 1000ms) steps(var(--chars)) forwards;
}
.intro.is-typing .intro__caret{
  animation: caret-blink .9s steps(1,end) infinite;
}

/* rounded wipe that reveals the site (shrinks overlay to center) */
.intro__wipe{
  position:absolute; inset:0; z-index: 3;
  background:
    radial-gradient(48rem 32rem at 50% 120%, rgba(138,180,248,.18), transparent 60%) no-repeat,
    #0f0f0f;
  border-radius: 28px;
  transform: scale(1);
  transform-origin: center;
  will-change: transform;
}

@media (max-width: 640px){
  .intro__wipe{
    background:
      radial-gradient(28rem 20rem at 50% 120%, rgba(138,180,248,.18), transparent 60%) no-repeat,
      #0f0f0f;
    border-radius: 22px;
  }
}

.intro.is-wiping .intro__wipe{
  animation: wipe-out var(--wipeMs, 820ms) cubic-bezier(.65,.02,.19,1) forwards;
}

/* fade the whole overlay *after* the wipe completes */
.intro.is-wiping{
    animation: intro-fade var(--fadeMs, 400ms) ease
               forwards calc(var(--wipeMs, 820ms) + var(--postHoldMs, 0ms));
  }
  .intro.is-wiping { pointer-events: none; }

/* keyframes */
@keyframes intro-type { to { width: calc(var(--chars) * 1ch); } }
@keyframes caret-blink { 0%,49%{opacity:1} 50%,100%{opacity:0} }
@keyframes grain { to { transform: translate3d(-1%,0,0); } }
@keyframes wipe-out { to { transform: scale(0); } }
@keyframes intro-fade { to { opacity:0; visibility:hidden; } }

/* accessibility: disable effect for reduced motion */
@media (prefers-reduced-motion: reduce){
  .intro{ display:none !important; }
}